%===================================
%
%                    oO   TH MACROS   Oo
%
%
%      Some macros...
%      (usefull for articles)
%
%===================================
%
% File : THmacros.sty
% Date : 23may06
% Author : HILAIRE Thibault
% 
%===================================



% déclaration
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{THmacros}[2006/05/23 Some usefull macros (mathematic)]

% packages requis
\RequirePackage{amssymb,amsmath,amstext}
\RequirePackage{color}

\DeclareOption*{ \PackageWarning{THmacros}{Option '\CurrentOption' unknown} }
\ProcessOptions


% maths macros
	% matriciel sets (R[nxm], etc...)		
		\newcommand{\matbb}[3]
		{
			\ensuremath{ \mathbb{#1}^{#2 \times #3} }
		}		
		% set of real matrices,  size #1 x #2
		%%% R^(n x m)
		\newcommand{\Rbb}[2]{ \matbb{R}{#1}{#2} }
		% set of complex matrices, size #1 x #2
		%%% C^(n x m)
		\newcommand{\Cbb}[2]{ \matbb{C}{#1}{#2} }		
	% equations
		% partial derivative de #1 par #2
		%%% d#1/d#2
		\newcommand{\dd}[2]
		{
			\ensuremath{ \frac{\partial #1}{\partial #2} }
		}
		%%% delta#1/delta#2
		\newcommand{\dede}[2]
		{
			\ensuremath{ \frac{\delta #1}{\delta #2} }
		}
		%
		%%% \en{ toto }_{}
		\newcommand{\en}[1]{ \left. \strut #1 \right| }
		% parenthesis
		%%% ()
		\newcommand{\pa}[1]
		{
			\ensuremath{ \left(#1\right) }
		}
		% transposed
		%%% ()^T
		\newcommand{\tr}[1]
		{
			\ensuremath{ \pa{#1}^{\top} }
		}
		% norm
		%%% || #1 ||
		\newcommand{\norm}[1]
		{
			\left\|#1\right\|
		}		
		% moduli
		%%% | #1 |
		\newcommand{\abs}[1]
		{
			\left|#1\right|
		}
		
		% operator Vec
		%%% Vec(#1)
		\newcommand{\OpVec}[0]
		{
			\ensuremath{\mathrm{Vec}}
		}		
		% operator (*) (used for the matricial derivative)
		\newcommand{\cd}[0]
		{
			\ensuremath{\circledast}
		}
		
		% operator tr
		%%% tr(#1)
		\newcommand{\trace}[1]
		{
			\ensuremath{\mathrm{tr}\pa{#1}}
		}
		% interval of integers
		%%% [[ #1 ]]
		\newcommand{\dbbrack}[1]	
		{
			\text{\textlbrackdbl} #1 \text{\textrbrackdbl}
			% à réaliser avec des crochets ``extensibles'', du genre \left \moncrochetg .... \right\moncrochetd
			% cf stmaryrd ou nath ou mathabx
		}
		% redefinition of lower equal and greater equal
		\renewcommand{\leq}[0]{ \leqslant }
		\renewcommand{\geq}[0]{ \geqslant }
		
		% One matrix
		\newcommand{\VecOne}[2]{\ensuremath{ \mathds{1}_{#1,#2} }}
		
		% operator floor
		\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}

% style, font

	% font
		% italic
		\newcommand{\I}[1]{\emph{#1}} %\texttt{#1}
		% bold
		\newcommand{\B}[1]{\textbf{#1}}
		% fixed length font
		\newcommand{\T}[1]{\texttt{#1}}
		% underline
		%\newcommand{\U}[1]{\underline{#1}}

	% comments/reviews
	\newsavebox{\commentbox}
	\newlength{\commentheight}
	\newcounter{questionno}
	\setcounter{questionno}{1}
	\newenvironment{comments}
	{
		\par
		\begin{lrbox}{\commentbox}
		\begin{minipage}[b]{.4\textwidth}\itshape\color{red}
	}
	{
		\end{minipage}
		\end{lrbox}
		\settoheight{\commentheight}{\usebox{\commentbox}}
		\rule{1mm}{\commentheight}\hfill
		\usebox{\commentbox}
	}
	\newenvironment{review}[1]
	{
		\noindent\color{blue}Review \#{#1}: \\
		\begin{lrbox}{\commentbox}
		\begin{minipage}[b]{.4\textwidth}\itshape\color{blue}
	}
	{
		\end{minipage}
		\end{lrbox}
		\settoheight{\commentheight}{\usebox{\commentbox}}
		\rule{1mm}{\commentheight}\hfill
		\usebox{\commentbox}
	}
	\newenvironment{question}
	{
		\noindent\color{black}
		\begin{lrbox}{\commentbox}
		\begin{minipage}[b]{.95\textwidth}\itshape\color{red}
		Q\thequestionno: 
	}
	{
		\end{minipage}
		\end{lrbox}
		\settoheight{\commentheight}{\usebox{\commentbox}}
		\rule{1mm}{\commentheight}\hfill
		\usebox{\commentbox}
		\addtocounter{questionno}{1}
	}



	% insertion d'objets flottants légendés
		% figure .pdf à insérer
		%%% \fig[options]{nom_du_fichier}{legende}
		\newcommand{\fig}[3][1]
		{
			\begin{figure}[htbp]
				\begin{center}
					\includegraphics[#1]{#2.pdf}
					\caption{#3\label{fig:#2}}
				\end{center}
			\end{figure}
		}
		% figure une seule colonne
		\newcommand{\figonecolumn}[3][1]
		{
			\begin{figure*}[htbp]
				\begin{center}
					\includegraphics[#1]{#2.pdf}
					\caption{#3\label{fig:#2}}
				\end{center}
			\end{figure*}
		}