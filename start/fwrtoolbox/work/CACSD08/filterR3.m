% Fixed-point algorithm in Matlab language
% (it uses integer to simulate fixed-point)
%
% y = filterR3(u)
%
% y: filtered output(s)
% u: intput(s)
%
% date: 14-May-2008 12:01:09
% Automatically generated by implementMATLAB / FWRToolbox


function y = filterR3(u)

% initialize                   
u = round(2.^10.*u);y = zeros( size(u,1), 1 );xn = zeros(2,1);xnp = zeros(2,1);                
                               
for i=1:size(u,1)

    % intermediate variables    Acc0 = xn(1) * -26130;    Acc0 = Acc0 + xn(2) * -26185;    Acc0 = Acc0 + u(i)  * 8780;    T0     = floor( Acc0/2^15 );    Acc1 = xn(1) * 8856;    Acc1 = Acc1 + xn(2) * -10175;    Acc1 = Acc1 + u(i)  * -24493;    T1     = floor( Acc1/2^15 );    % states    Acc2 = (T0) * 2^11;    Acc2 = Acc2 + (xn(1)) * 2^14;    xnp(1) = floor( Acc2/2^14 );    Acc3 = (T1) * 2^13;    Acc3 = Acc3 + (xn(2)) * 2^15;    xnp(2) = floor( Acc3/2^15 );    % output(s)    Acc4 = xn(1) * 23633;    Acc4 = Acc4 + xn(2) * 1808;    Acc4 = Acc4 + u(i)  * 119;    y(i)   = floor( Acc4/2^15 );    %permutations    xn = xnp;
    
end

y = 2.^-10.*y;